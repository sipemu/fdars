RUST_SRC = rust
RUST_TARGET_DIR = $(RUST_SRC)/target/release
STATLIB = $(RUST_TARGET_DIR)/libfdars.a

PKG_LIBS = -L$(RUST_TARGET_DIR) -lfdars -lpthread -ldl -lm

OBJECTS = entrypoint.o

all: $(SHLIB)

$(SHLIB): $(STATLIB) $(OBJECTS)

$(STATLIB):
	@rustc --version
	cd $(RUST_SRC) && CARGO_TARGET_DIR=target cargo build --release --lib

clean:
	rm -Rf $(OBJECTS) $(RUST_SRC)/target
